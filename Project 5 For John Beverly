# Born Free But Everywhere in SHACL #

For this project, the class will divide into two teams. Teams will be divided according to the following tasks: 
```
1. Construct and validate a SHACL scheme for Basic Formal Ontology
2. Construct five useful, general, novel SHACL patterns
``` 
I strongly encourage you leverage your understanding of description logics for both tasks; if you understand what can be expressed in OWL, then you can more easily construct SHACL constraints on expressions in OWL. 
Protege allows one to construct and test SHACL constraints. If you explore a bit, you'll be able to identify a way to visualize the constraints in a graph as you develop them as well. 


## Task 1 ##

The team pursuing task 1 will focus on constructing and validating a SHACL scheme for Basic Formal Ontology (BFO). It is not enough, however, to simply construct a SHACL file that parallels the BFO OWL file. That can be automated, as a matter of fact. Completing this task, rather, requires the construction of a SHACL file that parallels the BFO owl file but also constrains compatible knowledge graphs built on BFO to as much of the First-Order Logic representation of BFO, as possible. As you know, the FOL version of BFO expresses semantic content that cannot be expressed in BFO OWL version, since the latter uses a more restrictive language than the former. 

To validate your SHACL schema for BFO, you will need to generate a knowledge graph based on BFO with instance data added. You will then need to run your SHACL schema against this knowledge graph and generate a report absent errors or warnings. This must be done while respecting the semantics of the FOL version of BFO to the extent possible. 

This work will provide the foundation for a publication that illustrates how SHACL may be used to bridge the semantics of a data model whose implementations require expressivity restrictions. Completion of this task will thus make you eligible for co-authorship on the resulting publication. Students are encouraged, but not required, to continue building on this work as a final course project. 

You will need the following files: 

1. [BFO-FOL](https://github.com/BFO-ontology/BFO-2020/tree/master/21838-2/pdf)
2. [BFO-OWL](https://github.com/BFO-ontology/BFO-2020/blob/master/21838-2/owl/bfo-2020.owl)

You may find the following resources useful:

3. [SHACL W3C](https://www.w3.org/TR/shacl/)
4. [BFO 2.0 User Guide](https://ncorwiki.buffalo.edu/index.php/Basic_Formal_Ontology_2.0) - Link under "Background Information" 


## Task 2 ## 

The team pursuing task 2 will focus on constructing 5-10 useful, general, novel SHACL constraints. 

By "useful", I mean a SHACL constraint that reflects a compelling use case. For example, in the DASH library one finds dash:AllObjects which represents the set of all objects in a data graph, and which is used in scenarios where a shape is expected to apply to any object, no matter the subject or predicate. This is a useful constraint for determining whether a graph contains no literals. 

By "general", I mean a SHACL constraint that is not restricted to a single ontology, upper-level or otherwise, but rather can be used by many ontologies with minimal adjustment, if any. 

By "novel" I mean a SHACL constraint does not currently exist. I encourage you to explore widely to determine whether your constraint exists; I will be. You should not, for example, duplicate any constraints from the SHACL W3C documentation or from the DASH library, though you are free to use such constraints as inspiration. 

This work will provide the foundation for a publication describing a new extension of the SHACL library designed for wide use in the ontology community. Completion of this task will thus make you eligible for co-authorship on the resulting publication. Students are encouraged, but not required, to continue building on this work as a final course project. 

You may find the following resources useful: 

1. [SHACL W3C](https://www.w3.org/TR/shacl/)
2. [DASH Library](https://datashapes.org/dash.html)


## Assignment to Teams ##

The class will be divided evenly. Students are expected to determine allotment, but teams must be comprised of the same number of members (with a +1/-1 deviation allowed). This is an exercise in project management. I encourage you to identify a strategy early for dividing sub-tasks, setting deadlines, and addressing blockers to progress.  

I suggest setting up 15 minute 'stand-up' meetings every other day, where team members are expected to join. zoom call or meet in person and (a) explain what progress they have made on their sub-task, (b) explain what they intend to achieve before the next stand-up, and (c) share any blockers that have to progress. This is an effective way to keep members focused on a team goal, as well as opportunities to overcome challenges. 




Group 2 contains Emanuel, Katie, Josh V (commonly know as V by group member), Cameron, Josh B, Jieming, Lance, Tim(?), also Delaney 
Please note we DID check this against SHACL playground :) 
enjoy, if possible.


1st constraints begins below

@prefix ex: <http://example.org/> .

@prefix sh: <http://www.w3.org/ns/shacl#> .

@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

@prefix schema: <http://schema.org/> .

ex:RegistrationShape

a sh:NodeShape ;

sh:targetClass ex:Registration ;

sh:property [    

sh:path ex:lineRegistration ;    

sh:order ex:lineRegistrationOrder ;    

sh:node ex:RegistrationShape ; 

] .


ex:lineRegistrationOrder

a sh:Order ;

sh:datatype xsd:integer ;

sh:path ex:addedAt ;

sh:ascending true ;

sh:uniqueMembers true .


ex:RegistrationDateShape
  
  a sh:NodeShape ;
  
  sh:targetClass ex:RegistrationDate ;
  
  sh:property [    
  
  sh:path ex:RegistrationDate ;    
  
  sh:datatype xsd:string ;   
 
 Sh:description
 
 "US Date - format - MM/DD/YYYY" ;     

sh:minCount 1 ;   

sh:maxCount 1 ;   

sh:name "RegistrationDate" ;    

sh:pattern "[1-12]/[1-31]/[1990-2020]‚Äù" ;  

] .



ex:lineRegistrationDateOrder

a sh:Order ;

sh:datatype xsd:integer ;

sh:path ex:RegistrationAt ;

sh:ascending true ;

sh:uniqueMembers true .


ex:RegistrationDateANDlineRegistrationOrder

a sh:NodeShape ;

sh:and (ex:RegistrationDateShape ex:lineRegistrationDateOrder) ;

sh:property [    

sh:path rdf:type ;    

sh:datatype xsd:integer ;   

sh:node ex:ValidationResult ;   

sh:resultSeverity sh:Violation ;   

sh:sourceConstraintComponent ex:RegistrationDate ;    

sh:name "RegistrationDateANDlineRegistrationOrder" ; 

sh:focusNode :lineRegistrationDateOrder ;   

sh:value :integer ;   

sh:resultPath schema:RegistrationDate ; 

] .



2nd Constraints begins below

@prefix sh: <http://www.w3.org/ns/shacl#> .

@prefix ex: <http://example.org/> .

@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

ex:SpatialLocationShape

a sh:NodeShape ;

sh:targetClass ex:Location ;

sh:property [                  

sh:path ex:spatialcontainment ;              

sh:datatype xsd:anyURI ;                

sh:in (ex:city ex:country ex:continent) ;          

sh:message "Location must be within the specified spatial boundary" ;              

sh:minCount 1 ;           

sh:maxCount 1 ;           

sh:name "Location" ;           

sh:pattern "ex:city|ex:country|ex:continent" ;     

] .


3rd Constraint Begins Below 

@prefix sh: <http://www.w3.org/ns/shacl#> .

@prefix ex: <http://example.org/> .

@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .


ex:PersonShape 

a sh:NodeShape ;

sh:targetClass ex:Person ;

sh:property [

sh:path ex:gender ;

sh:in (ex:Male ex:Female ex:Nonbinary) ;

sh:message "Gender must be Male, Female, or Nonbinary." ;

] .


ex:GenderConstraint 

a sh:NodeShape ;

sh:targetClass ex:Gender ;

sh:property [

sh:path ex:identifiesAs ;

sh:in (ex:Male ex:Female ex:Nonbinary) ;

sh:message "Gender identity must be Male, Female, or Nonbinary." ;

] ;

sh:property [

sh:path ex:mostOfTheTimeIdentifiesAs ;

sh:in (ex:Male ex:Female ex:Nonbinary) ;

sh:message "Most of the time gender identity must be Male, Female, or Nonbinary." ;

] ;

sh:property [

sh:path ex:sometimesIdentifiesAs ;

sh:in (ex:Male ex:Female ex:Nonbinary) ;

sh:message "Sometimes gender identity must be Male, Female, or Nonbinary." ;

] .


4th Constraint Begins Below

@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix ex: <http://example.com/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Define the shapes for the album

ex:AlbumShape

a sh:NodeShape ;

sh:targetClass 

schema:MusicAlbum ;

sh:property [        

sh:path schema:name ;        sh:datatype xsd:string ;        

sh:minLength 3 ;       

sh:message "The album name must be a string of at least 3 characters." ;   

] ;

sh:property [        

sh:path schema:byArtist ;        

sh:node ex:ArtistShape ;        

sh:message "The album artist must be a valid artist object." ;    

] ;

sh:property [        

sh:path schema:datePublished ;       

sh:datatype xsd:date ;       

sh:message "The album release date must be a valid date in the format YYYY-MM-DD." ;   

] ;

sh:property [       

sh:path schema:numTracks ;        

sh:datatype xsd:integer ;        

sh:minInclusive 1 ;        

sh:message "The album must have at least 1 track." ;   

] ;

sh:property [        

sh:path schema:recordLabel ;        

sh:datatype xsd:string ;        

sh:message "The album record label must be a string." ;    

] .



# Define the shape for the artist object

ex:ArtistShape

a sh:NodeShape ;

sh:targetClass schema:MusicGroup ;

sh:property [        sh:path schema:name ;       

sh:datatype xsd:string ;        

sh:minLength 3 ;        

sh:message "The artist name must be a string of at least 3 characters." ;    ] ;

sh:property [        

sh:path schema:genre ;        sh:datatype xsd:string ;        

sh:message "The artist genre must be a string." ;    

] .

# Define the shape for the user object

ex:UserShape

a sh:NodeShape ;

sh:targetClass schema:Person ;

sh:property [       

sh:path schema:name ;        sh:datatype xsd:string ;        

sh:minLength 3 ;        

sh:message "The user name must be a string of at least 3 characters." ;    

] ;

sh:property [       

sh:path schema:email ;        sh:datatype xsd:string ;       

sh:pattern "[^@]+@[^.]+\\..+" ;       

sh:message "The user email must be a valid email address." ;   

] .

